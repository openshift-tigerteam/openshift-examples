
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://openshift-tiger-team.github.io/openshift-examples/install/install/">
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../../postinstall/postinstall/">
      
      
      <link rel="icon" href="../../images/favicon_io/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Install - OpenShift Examples</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Red+Hat+Text:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Red Hat Text";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#install" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OpenShift Examples" class="md-header__button md-logo" aria-label="OpenShift Examples" data-md-component="logo">
      
  <img src="../../images/ocp.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenShift Examples
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Install
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OpenShift Examples" class="md-nav__button md-logo" aria-label="OpenShift Examples" data-md-component="logo">
      
  <img src="../../images/ocp.png" alt="logo">

    </a>
    OpenShift Examples
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Install
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Install
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#acquire-the-hardware" class="md-nav__link">
    <span class="md-ellipsis">
      Acquire the Hardware
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Acquire the Hardware">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-hardware" class="md-nav__link">
    <span class="md-ellipsis">
      Required Hardware
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gather-the-information" class="md-nav__link">
    <span class="md-ellipsis">
      Gather the Information
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gather the Information">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cluster-values" class="md-nav__link">
    <span class="md-ellipsis">
      Cluster Values
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cluster Values">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdn-subnet-overlaps" class="md-nav__link">
    <span class="md-ellipsis">
      SDN Subnet Overlaps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod-subnet-and-host-prefix-explanation" class="md-nav__link">
    <span class="md-ellipsis">
      Pod Subnet and Host Prefix Explanation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#machine-information-required" class="md-nav__link">
    <span class="md-ellipsis">
      Machine Information Required
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-the-network" class="md-nav__link">
    <span class="md-ellipsis">
      Update the Network
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Update the Network">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#firewall-and-networking-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Firewall and Networking Requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Firewall and Networking Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mitm-proxy-and-self-signed-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      MITM Proxy and Self-Signed Certificates
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-dns-entries" class="md-nav__link">
    <span class="md-ellipsis">
      Create DNS Entries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create DNS Entries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-helpful-dns-entries" class="md-nav__link">
    <span class="md-ellipsis">
      Optional Helpful DNS Entries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-the-bastion-host" class="md-nav__link">
    <span class="md-ellipsis">
      Build the Bastion Host
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build the Bastion Host">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-the-os" class="md-nav__link">
    <span class="md-ellipsis">
      Install the OS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-the-host" class="md-nav__link">
    <span class="md-ellipsis">
      Register the Host
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download-required-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Download Required Tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-the-pull-secret" class="md-nav__link">
    <span class="md-ellipsis">
      Get the Pull Secret
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-ssh-key" class="md-nav__link">
    <span class="md-ellipsis">
      Create SSH Key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-port-8080-for-iso-http" class="md-nav__link">
    <span class="md-ellipsis">
      Open Port 8080 for iso-http
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tools-for-environment-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Tools for Environment Validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Configurations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create the Configurations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-working-directory" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Working Directory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-install-config" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Install Config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-agent-config" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Agent Config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-the-iso" class="md-nav__link">
    <span class="md-ellipsis">
      Generate the ISO
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boot-the-machines" class="md-nav__link">
    <span class="md-ellipsis">
      Boot the Machines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Install the Cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validate-the-install" class="md-nav__link">
    <span class="md-ellipsis">
      Validate the Install
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Install Debugging
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../postinstall/postinstall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Post-Install
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/networking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Networking
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtualization
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notes/notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Notes
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#acquire-the-hardware" class="md-nav__link">
    <span class="md-ellipsis">
      Acquire the Hardware
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Acquire the Hardware">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-hardware" class="md-nav__link">
    <span class="md-ellipsis">
      Required Hardware
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gather-the-information" class="md-nav__link">
    <span class="md-ellipsis">
      Gather the Information
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gather the Information">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cluster-values" class="md-nav__link">
    <span class="md-ellipsis">
      Cluster Values
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cluster Values">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdn-subnet-overlaps" class="md-nav__link">
    <span class="md-ellipsis">
      SDN Subnet Overlaps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod-subnet-and-host-prefix-explanation" class="md-nav__link">
    <span class="md-ellipsis">
      Pod Subnet and Host Prefix Explanation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#machine-information-required" class="md-nav__link">
    <span class="md-ellipsis">
      Machine Information Required
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-the-network" class="md-nav__link">
    <span class="md-ellipsis">
      Update the Network
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Update the Network">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#firewall-and-networking-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Firewall and Networking Requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Firewall and Networking Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mitm-proxy-and-self-signed-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      MITM Proxy and Self-Signed Certificates
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-dns-entries" class="md-nav__link">
    <span class="md-ellipsis">
      Create DNS Entries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create DNS Entries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-helpful-dns-entries" class="md-nav__link">
    <span class="md-ellipsis">
      Optional Helpful DNS Entries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-the-bastion-host" class="md-nav__link">
    <span class="md-ellipsis">
      Build the Bastion Host
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build the Bastion Host">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-the-os" class="md-nav__link">
    <span class="md-ellipsis">
      Install the OS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-the-host" class="md-nav__link">
    <span class="md-ellipsis">
      Register the Host
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download-required-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Download Required Tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-the-pull-secret" class="md-nav__link">
    <span class="md-ellipsis">
      Get the Pull Secret
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-ssh-key" class="md-nav__link">
    <span class="md-ellipsis">
      Create SSH Key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-port-8080-for-iso-http" class="md-nav__link">
    <span class="md-ellipsis">
      Open Port 8080 for iso-http
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tools-for-environment-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Tools for Environment Validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Configurations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create the Configurations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-working-directory" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Working Directory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-install-config" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Install Config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-agent-config" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Agent Config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-the-iso" class="md-nav__link">
    <span class="md-ellipsis">
      Generate the ISO
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boot-the-machines" class="md-nav__link">
    <span class="md-ellipsis">
      Boot the Machines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Install the Cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validate-the-install" class="md-nav__link">
    <span class="md-ellipsis">
      Validate the Install
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Install Debugging
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="install">Install</h1>
<p>These install documents are focused on on-premise installations on bare metal. There are other install methods. If you can use the <a href="https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/installing_on-premise_with_assisted_installer/index#using-the-assisted-installer_installing-on-prem-assisted">Assisted Installer</a>, do so. </p>
<p>You will need an entitled <a href="https://www.redhat.com/wapps/ugc/register.html?_flowId=register-flow&amp;_flowExecutionKey=e1s1">Red Hat</a> account. </p>
<p>Please read the entire page prior to starting. It is also recommended to acquire a git repository. </p>
<h2 id="acquire-the-hardware">Acquire the Hardware</h2>
<h3 id="required-hardware">Required Hardware</h3>
<p>Below is a list of the recommended hardware for a basic OpenShift install. Consider these minimum values - the more the better. Disks must be <a href="https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/etcd/index#recommended-etcd-practices_etcd-practices">SSD/NVME</a>. </p>
<table>
<thead>
<tr>
<th>Hosts (7 total)</th>
<th>CPU</th>
<th>Memory</th>
<th>Install Disk</th>
</tr>
</thead>
<tbody>
<tr>
<td>bastion</td>
<td>4</td>
<td>16 GB</td>
<td>60 GB</td>
</tr>
<tr>
<td>openshift-control-plane-{1,2,3}</td>
<td>16</td>
<td>32 GB</td>
<td>120 GB</td>
</tr>
<tr>
<td>openshift-worker-{1,2,3}</td>
<td>16</td>
<td>64 GB</td>
<td>120 GB</td>
</tr>
</tbody>
</table>
<p>This also assumes your storage is handled elsewhere is already in place. If ODF will be used for storage, then worker machines would need additional CPU, RAM and an extra SSD/NVME drive in at least three of the worker machines to form a storage cluster. </p>
<p>There is an ability to run the control plane nodes as schedulable, making them effectively worker nodes as well. This is discouraged unless required by the environment constraints, such as testing to run edge systems. </p>
<blockquote>
<p>Run etcd on a block device that can write at least 50 IOPS of 8KB sequentially, including fdatasync, in under 10ms.
<a href="https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/etcd/index#move-etcd-different-disk_etcd-performance">Consider moving etcd to it's own disk</a></p>
</blockquote>
<h2 id="gather-the-information">Gather the Information</h2>
<h3 id="cluster-values">Cluster Values</h3>
<p>Below are the values an enterprise typically has to gather or create for installing OpenShift.</p>
<table>
<thead>
<tr>
<th></th>
<th>Example Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Cluster Name</strong></td>
<td>poc</td>
<td>Name of the cluster</td>
</tr>
<tr>
<td><strong>Base Domain</strong></td>
<td>ocp.basedomain.com</td>
<td>Name of the domain</td>
</tr>
<tr>
<td><strong>Cluster Suffix</strong></td>
<td>poc.ocp.basedomain.com</td>
<td>cluster name + base domain, for easier notation</td>
</tr>
<tr>
<td><strong>Machine Subnet</strong></td>
<td>10.1.0.0/24 (vlan - 123)</td>
<td>Subnet and vlan for all machines/VIPs in cluster</td>
</tr>
<tr>
<td><strong>Pod Subnet</strong></td>
<td>10.128.0.0/14</td>
<td>Subnet for pod SDN</td>
</tr>
<tr>
<td><strong>Pod Subnet - Host Prefix</strong></td>
<td>23</td>
<td>Host prefix for Subnet for pod SDN</td>
</tr>
<tr>
<td><strong>Service Subnet</strong></td>
<td>172.30.0.0/16</td>
<td>Subnet for service SDN</td>
</tr>
<tr>
<td><strong>API VIP</strong></td>
<td>10.1.0.9</td>
<td>VIP for the MetalLB API Endpoint *</td>
</tr>
<tr>
<td><strong>Ingress VIP</strong></td>
<td>10.1.0.10</td>
<td>VIP for the MetalLB Ingress Endpoint *</td>
</tr>
<tr>
<td><strong>DNS</strong></td>
<td>dns1.basedomain.com,etc</td>
<td>IP or hostname for the DNS hosts</td>
</tr>
<tr>
<td><strong>NTP</strong></td>
<td>ntp.basedomain.com,etc</td>
<td>IP or hostname for the NTP hosts</td>
</tr>
</tbody>
</table>
<ul>
<li>VIPs must be within the machine subnet</li>
</ul>
<h4 id="sdn-subnet-overlaps">SDN Subnet Overlaps</h4>
<p>The Pod Subnet and Service Subnet are run in the software defined network (SDN) of the cluster. If those values conflict with existing subnets <strong>and</strong> your pods in the cluster will want to route to those outside services with conflicting IPs, you will need to provide different subnets. It's much easier to ensure they are unique.  </p>
<h4 id="pod-subnet-and-host-prefix-explanation">Pod Subnet and Host Prefix Explanation</h4>
<p>If we are just doing a small cluster, think 500 pods per node and 6 nodes is 3000 ips. You could use a <code>/20</code> and then each node would have a <code>/23</code>. <code>10.128.0.0/20</code> with <code>hostPrefix: 23</code>. </p>
<pre><code>10.128.0.0/23    (10.128.0.0 – 10.128.1.255)
10.128.2.0/23    (10.128.2.0 – 10.128.3.255)
10.128.4.0/23    (10.128.4.0 – 10.128.5.255)
10.128.6.0/23    (10.128.6.0 – 10.128.7.255)
10.128.8.0/23    (10.128.8.0 – 10.128.9.255)
10.128.10.0/23   (10.128.10.0 – 10.128.11.255)
10.128.12.0/23   (10.128.12.0 – 10.128.13.255)
10.128.14.0/23   (10.128.14.0 – 10.128.15.255)
</code></pre>
<blockquote>
<p><a href="https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/installing_on_bare_metal/index#CO63-10">Pod Subnet - Host Prefix</a><br />
<a href="https://docs.netgate.com/pfsense/en/latest/network/cidr.html#understanding-cidr-subnet-mask-notation">CIDR Subnet Reference</a></p>
</blockquote>
<h3 id="machine-information-required">Machine Information Required</h3>
<p>Typically, machines will have more than one NIC and these will be setup in a bond. Please collect the interface names and MAC addresses for ALL NICS and the install disk location on the machines. You provide the hostnames, IPs. IPs need to be located in the machine configuration subnet used on the install. Below is an example table of values needed for collection. </p>
<table>
<thead>
<tr>
<th>Hostname</th>
<th>Interface</th>
<th>MAC Address</th>
<th>Bond IP</th>
<th>Disk Hint</th>
</tr>
</thead>
<tbody>
<tr>
<td>bastion</td>
<td>eno1</td>
<td>A0-B1-C2-D3-E4-E1</td>
<td>10.1.0.5</td>
<td>/dev/sda</td>
</tr>
<tr>
<td>openshift-control-plane-1</td>
<td>eno1</td>
<td>A0-B1-C2-D3-E4-E1</td>
<td>10.1.0.11</td>
<td>/dev/sda</td>
</tr>
<tr>
<td></td>
<td>eno2</td>
<td>A0-B1-C2-D3-E4-E2</td>
<td></td>
<td></td>
</tr>
<tr>
<td>openshift-control-plane-2</td>
<td>eno1</td>
<td>A0-B1-C2-D3-E4-E3</td>
<td>10.1.0.12</td>
<td>/dev/sda</td>
</tr>
<tr>
<td></td>
<td>eno2</td>
<td>A0-B1-C2-D3-E4-E4</td>
<td></td>
<td></td>
</tr>
<tr>
<td>openshift-control-plane-3</td>
<td>eno1</td>
<td>A0-B1-C2-D3-E4-E5</td>
<td>10.1.0.13</td>
<td>/dev/sda</td>
</tr>
<tr>
<td></td>
<td>eno2</td>
<td>A0-B1-C2-D3-E4-E6</td>
<td></td>
<td></td>
</tr>
<tr>
<td>openshift-worker-1</td>
<td>eno1</td>
<td>A0-B1-C2-D3-E4-F1</td>
<td>10.1.0.21</td>
<td>/dev/sda</td>
</tr>
<tr>
<td></td>
<td>eno2</td>
<td>A0-B1-C2-D3-E4-F2</td>
<td></td>
<td></td>
</tr>
<tr>
<td>openshift-worker-2</td>
<td>eno1</td>
<td>A0-B1-C2-D3-E4-F3</td>
<td>10.1.0.22</td>
<td>/dev/sda</td>
</tr>
<tr>
<td></td>
<td>eno2</td>
<td>A0-B1-C2-D3-E4-F4</td>
<td></td>
<td></td>
</tr>
<tr>
<td>openshift-worker-3</td>
<td>eno1</td>
<td>A0-B1-C2-D3-E4-F5</td>
<td>10.1.0.23</td>
<td>/dev/sda</td>
</tr>
<tr>
<td></td>
<td>eno2</td>
<td>A0-B1-C2-D3-E4-F6</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>The IPs in the example table represent a bonded IP or if the cluster does not use bonding, that IP that connects the machine to the machine network. Notice all machine IPs are inside of the machine subnet of 10.1.0.0/24 defined above. </p>
<p>On modern RHEL (RHEL CoreOS included), the names of your NICs aren’t the old eth0, eth1 style anymore. They use predictable network interface names, which are generated at boot based on hardware topology and firmware information. Here’s the gist of how RHEL decides what your NICs will be called:</p>
<ul>
<li>eno1, eno2 → onboard NICs (from BIOS/firmware)</li>
<li>ens1f0, ens1f1 → PCI Express slots (“s” = slot, “f” = function)</li>
<li>enp3s0 → PCI bus location (p3 = bus 3, s0 = slot 0)</li>
<li>enx<MAC> → if nothing else matches, fall back to the MAC address</li>
</ul>
<p>So the name is tied to where the NIC is physically, not just “first one detected.” If you don't know what they will be, boot one of the boxes with a <a href="https://access.redhat.com/downloads/content/rhel">RHEL ISO</a> and find out.  </p>
<blockquote>
<p>Note: If you are using a hostname scheme that uses an integer at the end of the name, you should start with 1, not zero. But if you start with zero and you want it to match up with your ending IP, be consistent. </p>
</blockquote>
<h2 id="update-the-network">Update the Network</h2>
<h3 id="firewall-and-networking-requirements">Firewall and Networking Requirements</h3>
<p>Prior to the install, you must open the firewall to connect to Red Hat's servers and ports between the machines.</p>
<ul>
<li><a href="https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html/installation_configuration/configuring-firewall#configuring-firewall_configuring-firewall">Configuring Firewall (note below)</a></li>
<li><a href="https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/installing_on_bare_metal/index#installation-network-connectivity-user-infra_installing-bare-metal">Network Connectivity Requirements</a></li>
<li><a href="https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/installing_on_bare_metal/index#network-requirements-ensuring-required-ports-are-open_ipi-install-prerequisites">Ensuring required ports are open</a></li>
</ul>
<blockquote>
<p>Note: If you are using third-party software from a particular external repository, you will need to provide access to that as well. It is recommended to provide access to docker.io. </p>
</blockquote>
<h4 id="mitm-proxy-and-self-signed-certificates">MITM Proxy and Self-Signed Certificates</h4>
<p>If you are using a MITM proxy which is doing TLS inspection, the Red Hat CDN for <code>dnf install</code> or <code>yum install</code> uses cdn.redhat.com which has a self-signed certificate. If your MITM proxy automatically blocks self-signed certificates, you will need to whitelist cdn.redhat.com.</p>
<p>It is recommended that all entries for the firewall as detailed above are also allowed through any TLS inspection processes. </p>
<h3 id="create-dns-entries">Create DNS Entries</h3>
<p>Create the following A records in your DNS bases on the values from above. </p>
<table>
<thead>
<tr>
<th>A Record</th>
<th>IP Address</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api.&lt;cluster_suffix&gt;</code></td>
<td>10.1.0.9</td>
<td>Virtual IP  (VIP) for the API endpoint</td>
</tr>
<tr>
<td><code>api-int.&lt;cluster_suffix&gt;</code></td>
<td>10.1.0.9</td>
<td>Internal VIP for the API endpoint</td>
</tr>
<tr>
<td><code>*.apps.&lt;cluster_suffix&gt;</code></td>
<td>10.1.0.10</td>
<td>Virtual IP for the ingress endpoint</td>
</tr>
</tbody>
</table>
<p>You can validate the DNS using dig</p>
<pre><code class="language-shell">dig +noall +answer @&lt;dns&gt; api.&lt;cluster_suffix&gt;
dig +noall +answer @&lt;dns&gt; test.apps.&lt;cluster_suffix&gt;
</code></pre>
<blockquote>
<p><a href="https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/installing_on_bare_metal/index#network-requirements-dns_ipi-install-prerequisites">DNS requirements</a><br />
<a href="https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/installing_on_bare_metal/index#installation-user-provisioned-validating-dns_installing-bare-metal-network-customizations">Validating DNS resolution for user-provisioned infrastructure</a></p>
</blockquote>
<h4 id="optional-helpful-dns-entries">Optional Helpful DNS Entries</h4>
<table>
<thead>
<tr>
<th>A Record</th>
<th>IP Address</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bastion.&lt;cluster_suffix&gt;</code></td>
<td>10.1.0.4</td>
<td>IP for the bastion</td>
</tr>
<tr>
<td><code>openshift-control-plane-1.&lt;cluster_suffix&gt;</code></td>
<td>10.1.0.11</td>
<td>IP for cp1</td>
</tr>
<tr>
<td><code>openshift-control-plane-2.&lt;cluster_suffix&gt;</code></td>
<td>10.1.0.12</td>
<td>IP for cp2</td>
</tr>
<tr>
<td><code>openshift-control-plane-3.&lt;cluster_suffix&gt;</code></td>
<td>10.1.0.13</td>
<td>IP for cp3</td>
</tr>
<tr>
<td><code>openshift-worker-1.&lt;cluster_suffix&gt;</code></td>
<td>10.1.0.21</td>
<td>IP for w1</td>
</tr>
<tr>
<td><code>openshift-worker-2.&lt;cluster_suffix&gt;</code></td>
<td>10.1.0.22</td>
<td>IP for w2</td>
</tr>
<tr>
<td><code>openshift-worker-3.&lt;cluster_suffix&gt;</code></td>
<td>10.1.0.23</td>
<td>IP for w3</td>
</tr>
</tbody>
</table>
<h2 id="build-the-bastion-host">Build the Bastion Host</h2>
<p>The bastion host serves multiple purposes. First, all of our install work is done here. Second, it's used to validate the environment prior to installation. Third, it provides additional tools for installation such as a web server environment for the ISO images. </p>
<h3 id="install-the-os">Install the OS</h3>
<ul>
<li>Download <a href="https://access.redhat.com/downloads/content/rhel">Red Hat Enterprise Linux 9.x Binary DVD</a></li>
<li>Boot host from ISO and <a href="../rhel_install/">perform install</a> as <code>Server with GUI</code></li>
<li>Make sure to enable SSH for user</li>
<li>Reboot and SSH into bastion host as administrative user</li>
</ul>
<h3 id="register-the-host">Register the Host</h3>
<p>To be able to install necessary packages, you need to register the host with your Red Hat ID and password. You could have also accomplished this during the RHEL install. </p>
<pre><code class="language-shell">sudo subscription-manager register # Enter username/password
sudo subscription-manager repos --enable=rhel-9-for-x86_64-baseos-rpms
sudo subscription-manager repos --enable=rhel-9-for-x86_64-appstream-rpms
sudo dnf update -y 
sudo reboot
</code></pre>
<h3 id="download-required-tools">Download Required Tools</h3>
<p>Install the required tools.   </p>
<pre><code class="language-shell">OCP_VERSION=4.19
wget &quot;https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/stable-${OCP_VERSION}/openshift-install-linux.tar.gz&quot; -P /tmp
sudo tar -xvzf /tmp/openshift-install-linux.tar.gz -C /usr/local/bin
wget &quot;https://mirror.openshift.com/pub/openshift-v4/clients/ocp/stable-${OCP_VERSION}/openshift-client-linux.tar.gz&quot; -P /tmp
sudo tar -xvzf /tmp/openshift-client-linux.tar.gz -C /usr/local/bin
rm /tmp/openshift-install-linux.tar.gz /tmp/openshift-client-linux.tar.gz -y
sudo dnf install nmstate git podman 
</code></pre>
<p>Check for the availability of the required tools.    </p>
<pre><code class="language-shell">openshift-install version
oc version
nmstatectl -V
git -v
podman --version
</code></pre>
<h3 id="get-the-pull-secret">Get the Pull Secret</h3>
<p>Pull Secret is available at https://console.redhat.com/openshift/install/pull-secret
Download to ~/.pull-secret</p>
<h3 id="create-ssh-key">Create SSH Key</h3>
<pre><code class="language-shell">ssh-keygen -t ed25519 -f ~/.ssh/ocp_ed25519
</code></pre>
<h3 id="open-port-8080-for-iso-http">Open Port 8080 for iso-http</h3>
<pre><code class="language-shell">sudo firewall-cmd --permanent --add-port=8080/tcp
sudo firewall-cmd --reload
</code></pre>
<h3 id="tools-for-environment-validation">Tools for Environment Validation</h3>
<pre><code class="language-shell">ping registry.redhat.io        # ICMP doesn’t always work, but try
curl -vk https://registry.redhat.io/v2/
dig registry.redhat.io +short
nslookup registry.redhat.io
podman login registry.redhat.io
</code></pre>
<h2 id="create-the-configurations">Create the Configurations</h2>
<p>The typical agent based install requires two configuration files. </p>
<ul>
<li><code>install-config.yaml</code></li>
<li><code>agent-config.yaml</code></li>
</ul>
<p>The <code>install-config.yaml</code> contains all the cluster level information while the <code>agent-config.yaml</code> provides host level configurations. </p>
<blockquote>
<p>You can accomplish all of this with bastion tools like <code>vi</code>. It is highly recommended to use tools like Visual Studio Code (vscode) to help with yaml formatting. </p>
</blockquote>
<h3 id="create-the-working-directory">Create the Working Directory</h3>
<p>You are going to want to create a working directory and initialize it into a git repository. </p>
<pre><code class="language-shell">mkdir -p ocp &amp;&amp; cd ocp
git init 
echo &quot;install/&quot; &gt; .gitignore
echo &quot;# POC install notes&quot; &gt; notes.md
touch install-config.yaml
touch agent-config.yaml
git add -A
git commit -m &quot;repo initialized&quot;
</code></pre>
<h3 id="create-the-install-config">Create the Install Config</h3>
<p>Here is an example of the <code>install-config.yaml</code> contents.</p>
<pre><code class="language-yaml">apiVersion: v1
baseDomain: ocp.basedomain.com
metadata:
  name: poc
controlPlane:
  name: master
  architecture: amd64
  hyperthreading: Enabled
  replicas: 3
compute:
- name: worker
  architecture: amd64
  hyperthreading: Enabled
  replicas: 3
networking:
  clusterNetwork:
  - cidr: 10.128.0.0/14
    hostPrefix: 23
  machineNetwork:
  - cidr: 10.1.0.0/24
  networkType: OVNKubernetes
  serviceNetwork:
  - 172.30.0.0/16
platform:
  baremetal:
    apiVIP: 10.1.0.9
    ingressVIP: 10.1.0.10
    additionalNTPServers: 
      - 0.us.pool.ntp.org
      - 1.us.pool.ntp.org
pullSecret: 'value from ~/.pull_secret'
sshKey: 'value from ~/.ssh/ocp_ed25519.pub'
</code></pre>
<p>If your environment requires a proxy to access the internet then copy, modify and append to the end of the <code>install-config.yaml</code></p>
<pre><code class="language-yaml">proxy:
  httpProxy: http://user:password@proxy.example.com:3128
  httpsProxy: http://user:password@proxy.example.com:3128
  noProxy: poc.ocp.basedomain.com,10.1.0.0/24,10.128.0.0/14,172.30.0.0/16,api.poc.ocp.basedomain.com,api-int.poc.ocp.basedomain.com,*.apps.poc.ocp.basedomain.com
</code></pre>
<h3 id="create-the-agent-config">Create the Agent Config</h3>
<p>The agent-config.yaml is basically a list of hosts' information. You'll create a list item for each of the hosts. Here's an example of a host with two ethernet connections bonded together in an LACP bond. </p>
<pre><code class="language-yaml">apiVersion: v1alpha1
kind: AgentConfig
metadata:
  name: poc
rendezvousIP: 10.1.0.11                     # IP of the first control-plane1 host
additionalNtpSources:
  - 0.us.pool.ntp.org
  - 1.us.pool.ntp.org
hosts:
  - hostname: openshift-control-plane-1     # hostname
    role: master                            # master/worker
    rootDeviceHints:
      deviceName: &quot;/dev/sda&quot;                # Disk Hint
    interfaces:
      - name: eno1                          # Interface Name 1
        macAddress: A1:B2:3C:4D:1E:11       # Mac Address 1
      - name: eno2                          # Interface Name 2
        macAddress: A1:B2:3C:4D:2E:11       # Mac Address 2
    networkConfig:
      interfaces:
        - name: eno1                        # Interface Name 1
          type: ethernet
          state: up
          mac-address: A1:B2:3C:4D:1E:11    # Mac Address 1
          ipv4:
            enabled: false
          ipv6:
            enabled: false
        - name: eno2                        # Interface Name 2
          type: ethernet
          state: up
          mac-address: A1:B2:3C:4D:2E:11    # Mac Address 2
          ipv4:
            enabled: false
          ipv6:
            enabled: false
        - name: bond0
          type: bond
          state: up
          ipv4:
            enabled: true
            address:
              - ip: 10.1.0.11               # Host IP inside the machine subnet
                prefix-length: 24
            dhcp: false
          link-aggregation:
            mode: 802.3ad                   # LACP
            port:
              - eno1
              - eno2
            options:
              miimon: &quot;100&quot;
              lacp_rate: fast
          ipv6:
            enabled: false
      dns-resolver:
        config:
          server:
            - dns1.basedomain.com           # DNS 1
            - dns2.basedomain.com           # DNS 2
      routes:
        config:
          - destination: 0.0.0.0/0
            next-hop-address: 10.1.0.1
            next-hop-interface: bond0
            table-id: 254
</code></pre>
<blockquote>
<p>Notice the inconsistent labels and spellings.<br />
  * <code>macAddress</code> in the interfaces stanza, but <code>mac-address</code> in the networkConfig stanza.  <br />
  * <code>additionalNtpSources</code> is used here, but it's <code>additionalNTPServers</code> in the <code>install-config.yaml</code></p>
</blockquote>
<p><a href="https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html/installing_an_on-premise_cluster_with_the_agent-based_installer/preparing-to-install-with-agent-based-installer#agent-install-sample-config-bonds-vlans_preparing-to-install-with-agent-based-installer">Docs: Sample Config Bonds Vlans</a></p>
<h2 id="generate-the-iso">Generate the ISO</h2>
<p>From the <code>~/ocp</code> directory, you can now create the agent iso. We create an install directory and copy the yaml files into the directory because the image creation process consumes and <strong>destroys</strong> the configuration files. We want to keep a copy in case the process needs to be repeated.</p>
<p>Here's an example script. I would recommend creating a small file named <code>create-iso.sh</code> in the <code>ocp</code> working directory with the contents. Don't forget to <code>chmod +x create-iso.sh</code></p>
<pre><code class="language-shell">#!/bin/bash
rm -rf install
mkdir install
cp -r install-config.yaml agent-config.yaml install
openshift-install agent create image --dir=install
</code></pre>
<blockquote>
<p>You can always add <code>--log-level=debug</code> to any <code>openshift-install</code> commands for more output. </p>
</blockquote>
<p>This is going to generate an <code>agent.x86_64.iso</code> file in the install directory which should be located at <code>~/ocp/install</code>. Remember, everything in the <code>install</code> directory has been excluded from the git repository. </p>
<h2 id="boot-the-machines">Boot the Machines</h2>
<p>The best way to to provide the ISO as an HTTP source if you are using a BMC like iLo or iDRAC. Not doing so could result in issues during the install due to network contention using the web interfaces of those tools. </p>
<p>Luckily, on the bastion host, we already have podman installed so we can just use that to serve. </p>
<pre><code class="language-shell">podman run -d --name iso-http \
  -p 8080:8080 \
  -v ~/ocp/install/agent.x86_64.iso:/var/www/html/agent.x86_64.iso:Z \
  registry.redhat.io/rhel9/httpd-24:9.6
</code></pre>
<p>Test retrieving the iso using the following command. </p>
<pre><code class="language-shell">wget http://bastionhostname:8080/agent.x86_64.iso
</code></pre>
<blockquote>
<p>Don't forget to <a href="../bastion/#open-port-8080-for-iso-http">open the host firewall</a> on the bastion.   </p>
</blockquote>
<p>If for some reason this solution will not work, you can install <a href="../httpd/">httpd</a> and serve from there. </p>
<p>You can also copy it somewhere else from where the BMC has better access. Here's an example using scp.</p>
<pre><code class="language-shell">scp user@192.168.122.187:~/ocp/install/agent.x86_64.iso ~/iso/
</code></pre>
<h2 id="install-the-cluster">Install the Cluster</h2>
<p>When all the hosts are booted, wait for the bootstrap to complete. </p>
<pre><code class="language-shell">openshift-install agent wait-for bootstrap-complete --dir=install
</code></pre>
<p>When the bootstrap is complete, wait for the install to complete. </p>
<pre><code class="language-shell">openshift-install agent wait-for install-complete --dir=install
</code></pre>
<p>At the end of the process, you will be presented with the URL for the cluster endpoint, along with the kubeadmin credentials. They are also available in the install folder at <code>~/ocp/install</code> as files <code>kubeadmin-password</code> and <code>kubeconfig</code></p>
<p>Open the URL presented and log in. Wait until all checks are green before proceeding. </p>
<h2 id="validate-the-install">Validate the Install</h2>
<p>Login to the Cluster</p>
<pre><code class="language-shell">oc login --server=https://api.cluster.basedomain.com:6443 -u kubeadmin -p &lt;password&gt;
</code></pre>
<p>Test Connectivity</p>
<pre><code class="language-shell">oc debug node/&lt;worker-node-name&gt; -- chroot /host \
  podman pull registry.redhat.io/ubi9/ubi:latest
</code></pre>
<p>Cleanup the leftover install and configuration pods</p>
<pre><code class="language-shell">oc delete pods --all-namespaces --field-selector=status.phase=Succeeded
oc delete pods --all-namespaces --field-selector=status.phase=Failed
</code></pre>
<h2 id="install-debugging">Install Debugging</h2>
<p>Modify the Boot Parameters (GRUB/Boot Menu)</p>
<p>This is often the most reliable way to get a shell or verbose output when direct TTY switching fails. You'll need to intercept the boot process.</p>
<ul>
<li>Reboot the machine with the ISO.</li>
<li>At the GRUB (bootloader) menu: As soon as you see the initial boot menu, press an arrow key (up/down) to stop the automatic countdown.</li>
<li>Edit the boot entry:<ul>
<li>Select the installer's default boot entry (usually the first one).</li>
<li>Press the e key to edit the boot parameters.</li>
<li>Locate the linux or linuxefi line: This line contains the kernel arguments. Add debug/shell parameters to force an emergency shell. Go to the end of the linux or linuxefi line and add the param (see choices below). This will drop you into an initramfs shell before the root filesystem is mounted. It's a very minimal environment but allows ip a show, dmesg, and looking at files in the initramfs.</li>
<li>Press Ctrl+X or F10 to boot with the modified parameters.</li>
</ul>
</li>
</ul>
<p>The three main alternatives are:</p>
<p><code>rd.break</code></p>
<p>How it works: This parameter tells dracut (the initramfs environment) to interrupt the normal boot process before the real root filesystem is mounted and before systemd takes over. You are dropped into an initramfs shell where you can manually mount <code>/sysroot</code> and chroot into it to make changes. Since this is very early in the boot sequence, the environment is limited, but it lets you work on the system before anything else initializes.</p>
<p>When to use it: This is the method of choice for situations where you need to fix problems directly on the root filesystem, especially when you can’t log in normally—such as resetting a forgotten root password or repairing critical files before systemd runs. It’s lower-level than <code>systemd.unit=emergency.target</code> and gives you control before the system even mounts root.</p>
<p><code>systemd.unit=emergency.target</code></p>
<p>How it works: This parameter tells the systemd process to boot directly into a minimal shell. It will try to mount the root filesystem as read-only and start only the most essential services required for an emergency shell. This is often the preferred method for general system troubleshooting.</p>
<p>When to use it: This is a good choice for fixing issues that aren't related to the initial filesystem or the boot process itself, such as a corrupt /etc/fstab or a misconfigured service. It gives you a more complete environment than rd.break but still keeps things simple.</p>
<p><code>init=/bin/bash</code></p>
<p>How it works: This is the most direct and basic method. It tells the kernel to bypass all the normal boot processes and execute /bin/bash directly as the first process (PID 1). This gives you a shell with no services, no network, and the root filesystem mounted as read-only.</p>
<p>When to use it: Use this as a last resort when other methods fail. It's the most primitive and powerful method, as it gives you control before any other processes or services start. It's ideal for a corrupted boot process or severe filesystem issues where rd.break or emergency.target might fail to load. It also requires you to manually remount the root filesystem as read-write, just like you were doing with rd.break.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../extra/extra.js"></script>
      
    
  </body>
</html>